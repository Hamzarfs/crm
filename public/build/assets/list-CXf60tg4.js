import{_ as re}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-DcuUperp.js";import{r as H}from"./validators-Z6BjoYpS.js";import{d as A,r as i,w as ae,o as F,g as L,f as r,b as e,n,aG as w,aL as P,ai as y,p as c,aK as q,aM as te,c as oe,a0 as M,v as le,e as ie,a as se}from"./main-FCzYu4Z5.js";import{_ as h}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-BVcUhHbr.js";import{V as I}from"./VDivider-knA9H03k.js";import{V as E,b as B,c as ne}from"./VCard-Do568HRS.js";import{V as j}from"./VForm-DAROEqCA.js";import{V as G,a as R}from"./VRow-DcbkzY-u.js";import{V as K}from"./VTextField-JeOZvJkP.js";import{V as J}from"./VNavigationDrawer-Ae1xKXtE.js";import{$ as U}from"./api-CRIIns0m.js";import{V as de}from"./VSpacer-DgLf_p26.js";import{V as ue}from"./VDataTable-BGPZE7tW.js";import{V as z}from"./VTooltip-SL5-U2jd.js";import{V as me}from"./VSnackbar-xVpasArO.js";import{V as pe}from"./VDialog-BbF2kOnV.js";import"./helpers-BO_WrFPz.js";import"./VAvatar-CP8SEjMm.js";import"./VImg-CJF-w0vk.js";import"./InputIcon-wsmb1BjU.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              *//* empty css                   */import"./VCounter-fwUCpOxO.js";import"./VField-Dk2Ak1ql.js";import"./easing-CjukEv2V.js";import"./VInput-B2EWUdv0.js";import"./delay-ghhtiNk_.js";import"./scopeId-C8kA2Rpd.js";import"./ssrBoot-CaII-3XN.js";import"./index-9rIf2CJL.js";import"./VPagination-ABgY-7nO.js";import"./VSelect-B3zOJvEu.js";import"./VList-DBeUyEP9.js";import"./dialog-transition-CkzesdKy.js";import"./VMenu-B6LO-Wa5.js";import"./VOverlay-CJoYV0aa.js";import"./lazy-s9MkjEdz.js";import"./VCheckboxBtn-B0Ml4Fv6.js";import"./VSelectionControl-CjMQjtTf.js";import"./VChip-ChL126MO.js";import"./VSlideGroup-CrEC992E.js";import"./VTable-DTLm3gSp.js";import"./filter-D7wIZvCz.js";const ce=A({__name:"EditServiceDrawer",props:{isDrawerOpen:{type:Boolean},errors:{},service:{}},emits:["update:isDrawerOpen","serviceData"],setup(O,{expose:_,emit:C}){const m=O,d=C,f=i(!1),p=i(),u=i(m.service.name);ae(()=>m.service,a=>{u.value=a.name},{immediate:!0,deep:!0});const v=()=>{d("update:isDrawerOpen",!1),q(()=>{var a,t;(a=p.value)==null||a.reset(),(t=p.value)==null||t.resetValidation()})},k=()=>{var a;(a=p.value)==null||a.validate().then(({valid:t})=>{t&&d("serviceData",{id:m.service.id,name:u.value})})};_({closeNavigationDrawer:v});const g=a=>{d("update:isDrawerOpen",a)};return(a,t)=>{const D=h;return F(),L(J,{temporary:"",width:400,location:"end","model-value":m.isDrawerOpen,"onUpdate:modelValue":g},{default:r(()=>[e(D,{title:"Edit Service",onCancel:v}),e(I),e(E,{flat:""},{default:r(()=>[e(B,null,{default:r(()=>[e(j,{ref_key:"refForm",ref:p,modelValue:n(f),"onUpdate:modelValue":t[1]||(t[1]=s=>w(f)?f.value=s:null),onSubmit:P(k,["prevent"])},{default:r(()=>[e(G,null,{default:r(()=>[e(R,{cols:"12"},{default:r(()=>[e(K,{modelValue:n(u),"onUpdate:modelValue":t[0]||(t[0]=s=>w(u)?u.value=s:null),rules:["requiredValidator"in a?a.requiredValidator:n(H)],label:"Name","error-messages":m.errors.name,placeholder:"Service name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(R,{cols:"12"},{default:r(()=>[e(y,{type:"submit",class:"me-4"},{default:r(()=>[c(" Submit ")]),_:1}),e(y,{type:"reset",variant:"outlined",color:"error",onClick:v},{default:r(()=>[c(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),ve=A({__name:"AddNewServiceDrawer",props:{isDrawerOpen:{type:Boolean},errors:{}},emits:["update:isDrawerOpen","serviceData"],setup(O,{expose:_,emit:C}){const m=O,d=C,f=i(!1),p=i(),u=i(""),v=()=>{d("update:isDrawerOpen",!1),q(()=>{var a,t;(a=p.value)==null||a.reset(),(t=p.value)==null||t.resetValidation()})},k=()=>{var a;(a=p.value)==null||a.validate().then(({valid:t})=>{t&&d("serviceData",{name:u.value})})};_({closeNavigationDrawer:v});const g=a=>{d("update:isDrawerOpen",a)};return(a,t)=>{const D=h;return F(),L(J,{temporary:"",width:400,location:"end","model-value":m.isDrawerOpen,"onUpdate:modelValue":g},{default:r(()=>[e(D,{title:"Add Service",onCancel:v}),e(I),e(E,{flat:""},{default:r(()=>[e(B,null,{default:r(()=>[e(j,{ref_key:"refForm",ref:p,modelValue:n(f),"onUpdate:modelValue":t[1]||(t[1]=s=>w(f)?f.value=s:null),onSubmit:P(k,["prevent"])},{default:r(()=>[e(G,null,{default:r(()=>[e(R,{cols:"12"},{default:r(()=>[e(K,{modelValue:n(u),"onUpdate:modelValue":t[0]||(t[0]=s=>w(u)?u.value=s:null),rules:["requiredValidator"in a?a.requiredValidator:n(H)],label:"Name","error-messages":m.errors.name,placeholder:"Service name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(R,{cols:"12"},{default:r(()=>[e(y,{type:"submit",class:"me-4"},{default:r(()=>[c(" Submit ")]),_:1}),e(y,{type:"reset",variant:"outlined",color:"error",onClick:v},{default:r(()=>[c(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),fe=ie("span",null,"Services",-1),ir=A({__name:"list",async setup(O){let _,C;const m=i({});let d,f;const p=i(),u=i(),v=i(),k=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Actions",key:"actions",sortable:!1}],{services:g}=([_,C]=te(()=>U("services")),_=await _,C(),_),a=i(g),t=i(!1),D=i(!1),s=i(!1),b=i(!1);let $;const Q=async V=>{const{success:o,message:S,service:x}=await U("/services",{method:"POST",body:V,onResponseError({response:N}){T.value=N._data.errors}});o&&(s.value=!0,a.value=[...a.value,x],$=S,p.value.closeNavigationDrawer(),q(()=>{v.value.$el.querySelector(".v-table__wrapper").scrollTop=v.value.$el.querySelector(".v-table__wrapper").scrollHeight}))},W=async V=>{const{success:o,message:S,service:x}=await U(`services/${m.value.id}`,{method:"PUT",body:V,onResponseError({response:N}){T.value=N._data.errors}});o&&(s.value=!0,a.value[f]=x,$=S,u.value.closeNavigationDrawer())},X=V=>{m.value=V,f=a.value.indexOf(V),D.value=!0},Y=async()=>{const{success:V,message:o}=await U(`services/${d}`,{method:"DELETE"});b.value=!1,V&&(s.value=!0,$=o,a.value=a.value.filter(S=>S.id!==d))},T=i({name:void 0});return(V,o)=>{const S=se("IconBtn"),x=ve,N=ce,Z=re;return F(),oe("section",null,[e(E,{class:"mb-6"},{default:r(()=>[e(ne,{class:"d-flex align-center my-2"},{default:r(()=>[fe,e(de),e(y,{onClick:o[0]||(o[0]=l=>t.value=!0),"prepend-icon":"ri-user-add-fill"},{default:r(()=>[c(" Add New Service ")]),_:1})]),_:1}),e(I),e(ue,{hover:"","fixed-header":"",style:{"max-height":"600px"},items:n(a),"item-value":"id",ref_key:"dataTableRef",ref:v,headers:k,class:"text-no-wrap rounded-0",density:"default"},{"item.actions":r(({item:l})=>[e(S,{size:"small",onClick:ee=>X(l),color:"primary"},{default:r(()=>[e(M,{icon:"ri-edit-box-line"}),e(z,{activator:"parent",location:"top"},{default:r(()=>[c(" Edit ")]),_:1})]),_:2},1032,["onClick"]),e(S,{size:"small",onClick:ee=>{b.value=!0,w(d)?d.value=l.id:d=l.id},color:"error"},{default:r(()=>[e(M,{icon:"ri-delete-bin-7-line"}),e(z,{activator:"parent",location:"top"},{default:r(()=>[c(" Delete ")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1}),e(x,{isDrawerOpen:n(t),"onUpdate:isDrawerOpen":o[1]||(o[1]=l=>w(t)?t.value=l:null),onServiceData:Q,ref_key:"addNewServiceDrawerRef",ref:p,errors:n(T)},null,8,["isDrawerOpen","errors"]),e(N,{isDrawerOpen:n(D),"onUpdate:isDrawerOpen":o[2]||(o[2]=l=>w(D)?D.value=l:null),onServiceData:W,service:n(m),ref_key:"editServiceDrawerRef",ref:u,errors:n(T)},null,8,["isDrawerOpen","service","errors"]),e(me,{modelValue:n(s),"onUpdate:modelValue":o[4]||(o[4]=l=>w(s)?s.value=l:null)},{actions:r(()=>[e(y,{color:"error",onClick:o[3]||(o[3]=l=>s.value=!1)},{default:r(()=>[c(" Close ")]),_:1})]),default:r(()=>[c(le(n($))+" ",1)]),_:1},8,["modelValue"]),e(pe,{modelValue:n(b),"onUpdate:modelValue":o[8]||(o[8]=l=>w(b)?b.value=l:null),width:"400"},{default:r(()=>[e(E,{title:"Confirmation",class:"pb-5"},{default:r(()=>[e(Z,{variant:"text",size:"default",onClick:o[5]||(o[5]=l=>b.value=!1)}),e(B,null,{default:r(()=>[c(" Are you sure you want to delete this service? ")]),_:1}),e(B,{class:"d-flex align-center justify-center gap-4"},{default:r(()=>[e(y,{variant:"elevated",onClick:o[6]||(o[6]=l=>Y()),color:"error"},{default:r(()=>[c(" Confirm ")]),_:1}),e(y,{color:"secondary",variant:"outlined",onClick:o[7]||(o[7]=l=>b.value=!1)},{default:r(()=>[c(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{ir as default};
