import{g as B}from"./helpers-BO_WrFPz.js";import{d as I,Z as N,a as $,o as u,g as C,f as a,b as t,s as E,a0 as v,I as k,p as f,v as p,n as c,J as V,c as w,F as S,i as M,x as R,e as r,z as A,aL as L,ai as P,aM as T,r as U}from"./main-DoQFmMsa.js";import{C as D}from"./vue3-perfect-scrollbar-Dah25qMm.js";import{V as F}from"./VBadge-Q3x4SoPx.js";import{V as J}from"./VMenu-Dwo0kCga.js";import{V as O,a as Z,b as j}from"./VCard-CvMXks-w.js";import{V as q}from"./VChip-D3GIz1VX.js";import{V as G}from"./VTooltip-DriPcYkZ.js";import{V as g}from"./VDivider-CiGpRMeQ.js";import{V as H,a as z,b as K}from"./VList-jAkofN4n.js";import{V as Q}from"./VAvatar-A7ztkq2k.js";import{V as W}from"./VSpacer-DO_vufVD.js";import{$ as X}from"./api-B6c1NHMd.js";const Y=r("h5",{class:"text-h5 text-truncate"}," Notifications ",-1),ee={class:"d-flex align-start gap-3"},te=r("h6",{class:"text-h6 mb-1"}," New task created! ",-1),ae={class:"text-body-2 mb-2",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},ie={class:"text-sm text-disabled mb-0",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},oe={class:"d-flex flex-column align-end gap-2"},se={style:{"block-size":"20px","inline-size":"20px"}},ne=I({__name:"Notifications",props:{notifications:{},badgeProps:{default:void 0},location:{default:"bottom end"}},emits:["read","unread","remove","click:notification"],setup(b,{emit:d}){const i=b,m=d,n=N(()=>i.notifications.some(o=>o.isSeen===!1)),x=()=>{const o=i.notifications.map(h=>h.id);n.value?m("read",o):m("unread",o)},_=N(()=>i.notifications.filter(o=>!o.isSeen).length);return(o,h)=>{const s=$("IconBtn");return u(),C(s,{id:"notification-btn"},{default:a(()=>[t(F,E({dot:""},i.badgeProps,{"model-value":i.notifications.some(e=>!e.isSeen),color:"error",bordered:"","offset-x":"1","offset-y":"1"}),{default:a(()=>[t(v,{icon:"ri-notification-2-line"})]),_:1},16,["model-value"]),t(J,{activator:"parent",width:"380",location:i.location,offset:"15px","close-on-content-click":!1},{default:a(()=>[t(O,{class:"d-flex flex-column"},{default:a(()=>[t(Z,{class:"notification-section"},{append:a(()=>[k(t(q,{size:"small",class:"me-3",variant:"tonal",color:"primary"},{default:a(()=>[f(p(c(_))+" new ",1)]),_:1},512),[[V,!!c(n)]]),k(t(s,{onClick:x},{default:a(()=>[t(v,{color:"high-emphasis",icon:c(n)?"ri-mail-open-line":"ri-mail-line"},null,8,["icon"]),t(G,{activator:"parent",location:"start"},{default:a(()=>[f(p(c(n)?"Mark all as read":"Mark all as unread"),1)]),_:1})]),_:1},512),[[V,i.notifications.length]])]),default:a(()=>[Y]),_:1}),t(g),t(c(D),{options:{wheelPropagation:!1},style:{"max-block-size":"27rem"}},{default:a(()=>[t(H,{class:"py-0"},{default:a(()=>[(u(!0),w(S,null,M(i.notifications,(e,l)=>(u(),w(S,{key:e.title},[l>0?(u(),C(g,{key:0})):R("",!0),t(z,{link:"",lines:"one","min-height":"66px",class:"list-item-hover-class py-3",onClick:y=>o.$emit("click:notification",e)},{default:a(()=>[r("div",ee,[r("div",null,[t(Q,{class:"cursor-pointer",size:"38",variant:"tonal",color:"primary"},{default:a(()=>[f(p(("getInitials"in o?o.getInitials:c(B))(e.creator)),1)]),_:2},1024)]),r("div",null,[te,r("p",ae,p(e.creator)+" has assigned you a new task. ",1),r("p",ie,p(e.time),1)]),t(W),r("div",oe,[t(v,{color:e.isSeen?"#a8aaae":"primary",icon:"ri-circle-fill",size:"10",class:A(`${e.isSeen?"visible-in-hover":""} ms-1`),onClick:L(y=>e.isSeen?m("unread",[e.id]):m("read",[e.id]),["stop"])},null,8,["color","class","onClick"]),r("div",se,[t(v,{size:"20",icon:"ri-close-line",color:"secondary",class:"visible-in-hover",onClick:y=>o.$emit("remove",e.id)},null,8,["onClick"])])])])]),_:2},1032,["onClick"])],64))),128)),k(t(z,{class:"text-center text-medium-emphasis",style:{"block-size":"56px"}},{default:a(()=>[t(K,null,{default:a(()=>[f("No Notification Found!")]),_:1})]),_:1},512),[[V,!i.notifications.length]])]),_:1})]),_:1}),t(g),k(t(j,{class:"pa-4"},{default:a(()=>[t(P,{block:"",size:"small"},{default:a(()=>[f(" View All Notifications ")]),_:1})]),_:1},512),[[V,i.notifications.length]])]),_:1})]),_:1},8,["location"])]),_:1})}}}),xe=I({__name:"NavBarNotifications",async setup(b){let d,i;const{notifications:m}=([d,i]=T(()=>X("notfications/all")),d=await d,i(),d),n=U(m),x=s=>{n.value.forEach((e,l)=>{s===e.id&&n.value.splice(l,1)})},_=s=>{n.value.forEach(e=>{s.forEach(l=>{l===e.id&&(e.isSeen=!0)})})},o=s=>{n.value.forEach(e=>{s.forEach(l=>{l===e.id&&(e.isSeen=!1)})})},h=s=>{s.isSeen||_([s.id])};return(s,e)=>{const l=ne;return u(),C(l,{notifications:c(n),onRemove:x,onRead:_,onUnread:o,"onClick:notification":h},null,8,["notifications"])}}});export{xe as _};
