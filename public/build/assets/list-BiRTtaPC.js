import{_ as Z}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-BH4UBKf3.js";import{r as M}from"./validators-Z6BjoYpS.js";import{d as R,r as n,o as E,g as z,f as a,b as e,n as s,aG as _,aL as H,ai as C,p as f,aK as A,w as ee,aM as ae,c as re,a0 as q,v as te,e as oe,a as le}from"./main-DoQFmMsa.js";import{_ as L}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-BjbO3N_D.js";import{V as F}from"./VDivider-CiGpRMeQ.js";import{b as S,V as T,c as ne}from"./VCard-CvMXks-w.js";import{V as P}from"./VForm-MqJCh6j8.js";import{V as h,a as U}from"./VRow-CBIZXy0V.js";import{V as j}from"./VTextField-C5K-JLC3.js";import{V as G}from"./VNavigationDrawer-C1kAe-dV.js";import{$}from"./api-B6c1NHMd.js";import{V as se}from"./VSpacer-DO_vufVD.js";import{V as ie}from"./VDataTable-Cq00Lau-.js";import{V as I}from"./VTooltip-DriPcYkZ.js";import{V as de}from"./VSnackbar-CFNgeUZK.js";import{V as ue}from"./VDialog-q404EtSX.js";import"./helpers-BO_WrFPz.js";import"./VAvatar-A7ztkq2k.js";import"./VImg-BvvxBpKO.js";import"./InputIcon-C91L1USK.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              *//* empty css                   */import"./VCounter-OXl0Qa9T.js";import"./VField-BD5A6g5X.js";import"./easing-CjukEv2V.js";import"./VInput-j0tWo3aL.js";import"./delay-Dhu81iSy.js";import"./scopeId-C1Mw3z0g.js";import"./ssrBoot-CpQaGIBj.js";import"./index-9rIf2CJL.js";import"./VPagination-Bz8XJ3Wz.js";import"./VSelect-DD45070D.js";import"./VList-jAkofN4n.js";import"./dialog-transition-Cr9rcsZj.js";import"./VMenu-Dwo0kCga.js";import"./VOverlay-BtLUM5vY.js";import"./lazy-CojwJwNx.js";import"./VCheckboxBtn-ybuIpKJx.js";import"./VSelectionControl-CA9osU1B.js";import"./VChip-D3GIz1VX.js";import"./VSlideGroup-DZ8i23BH.js";import"./VTable-XmEDbQ3e.js";import"./filter--_JGeJ5X.js";const me=R({__name:"AddNewBrandDrawer",props:{isDrawerOpen:{type:Boolean},errors:{}},emits:["update:isDrawerOpen","brandData"],setup(x,{expose:b,emit:k}){const i=x,d=k,V=n(!1),m=n(),u=n(""),c=()=>{d("update:isDrawerOpen",!1),A(()=>{var r,t;i.errors.name="",(r=m.value)==null||r.reset(),(t=m.value)==null||t.resetValidation()})},g=()=>{var r;(r=m.value)==null||r.validate().then(({valid:t})=>{t&&d("brandData",{name:u.value})})};b({closeNavigationDrawer:c});const D=r=>{d("update:isDrawerOpen",r)};return(r,t)=>{const v=L;return E(),z(G,{temporary:"",width:400,location:"end","model-value":i.isDrawerOpen,"onUpdate:modelValue":D},{default:a(()=>[e(v,{title:"Add Brand",onCancel:c}),e(F),e(T,{flat:""},{default:a(()=>[e(S,null,{default:a(()=>[e(P,{ref_key:"refForm",ref:m,modelValue:s(V),"onUpdate:modelValue":t[1]||(t[1]=p=>_(V)?V.value=p:null),onSubmit:H(g,["prevent"])},{default:a(()=>[e(h,null,{default:a(()=>[e(U,{cols:"12"},{default:a(()=>[e(j,{modelValue:s(u),"onUpdate:modelValue":t[0]||(t[0]=p=>_(u)?u.value=p:null),rules:["requiredValidator"in r?r.requiredValidator:s(M)],label:"Name","error-messages":i.errors.name,placeholder:"Brand Name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(C,{type:"submit",class:"me-4"},{default:a(()=>[f(" Submit ")]),_:1}),e(C,{type:"reset",variant:"outlined",color:"error",onClick:c},{default:a(()=>[f(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),pe=R({__name:"EditBrandDrawer",props:{isDrawerOpen:{type:Boolean},errors:{},brand:{}},emits:["update:isDrawerOpen","brandData"],setup(x,{expose:b,emit:k}){const i=x,d=k,V=n(!1),m=n(),u=n(i.brand.name);ee(()=>i.brand,r=>{u.value=r.name},{immediate:!0,deep:!0});const c=()=>{d("update:isDrawerOpen",!1),A(()=>{var r,t;i.errors.name="",(r=m.value)==null||r.reset(),(t=m.value)==null||t.resetValidation()})},g=()=>{var r;(r=m.value)==null||r.validate().then(({valid:t})=>{t&&d("brandData",{id:i.brand.id,name:u.value})})};b({closeNavigationDrawer:c});const D=r=>{d("update:isDrawerOpen",r)};return(r,t)=>{const v=L;return E(),z(G,{temporary:"",width:400,location:"end","model-value":i.isDrawerOpen,"onUpdate:modelValue":D},{default:a(()=>[e(v,{title:"Edit brand",onCancel:c}),e(F),e(T,{flat:""},{default:a(()=>[e(S,null,{default:a(()=>[e(P,{ref_key:"refForm",ref:m,modelValue:s(V),"onUpdate:modelValue":t[1]||(t[1]=p=>_(V)?V.value=p:null),onSubmit:H(g,["prevent"])},{default:a(()=>[e(h,null,{default:a(()=>[e(U,{cols:"12"},{default:a(()=>[e(j,{modelValue:s(u),"onUpdate:modelValue":t[0]||(t[0]=p=>_(u)?u.value=p:null),rules:["requiredValidator"in r?r.requiredValidator:s(M)],label:"Name","error-messages":i.errors.name,placeholder:"brand Name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(C,{type:"submit",class:"me-4"},{default:a(()=>[f(" Submit ")]),_:1}),e(C,{type:"reset",variant:"outlined",color:"error",onClick:c},{default:a(()=>[f(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),fe=oe("span",null,"Brands",-1),oa=R({__name:"list",async setup(x){let b,k;const i=n({name:""});let d,V;const m=n(),u=n(),c=n(),g=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Actions",key:"actions",sortable:!1}],D=n(!1),r=n(!1),t=n(!1),v=n(!1);let p;const{brands:K}=([b,k]=ae(()=>$("brands")),b=await b,k(),b),B=n(K),J=async w=>{const{success:o,message:y,brand:N}=await $("/brands",{method:"POST",body:w,onResponseError({response:l}){O.value=l._data.errors}});o&&(t.value=!0,B.value=[...B.value,N],p=y,m.value.closeNavigationDrawer(),A(()=>{c.value.$el.querySelector(".v-table__wrapper").scrollTop=c.value.$el.querySelector(".v-table__wrapper").scrollHeight}))},Q=async w=>{const{success:o,message:y,brand:N}=await $(`brands/${w.id}`,{method:"PUT",body:w,onResponseError({response:l}){O.value=l._data.errors}});o&&(t.value=!0,B.value[V]=N,p=y,u.value.closeNavigationDrawer())},W=w=>{i.value=w,V=B.value.indexOf(w),r.value=!0},X=async()=>{const{success:w,message:o}=await $(`brands/${d}`,{method:"DELETE"});v.value=!1,w&&(t.value=!0,p=o,B.value=B.value.filter(y=>y.id!==d))},O=n({name:void 0});return(w,o)=>{const y=le("IconBtn"),N=Z;return E(),re("section",null,[e(T,{class:"mb-6"},{default:a(()=>[e(ne,{class:"d-flex align-center my-2"},{default:a(()=>[fe,e(se),e(C,{onClick:o[0]||(o[0]=l=>D.value=!0),"prepend-icon":"ri-user-add-fill"},{default:a(()=>[f(" Add New Brand ")]),_:1})]),_:1}),e(F),e(ie,{hover:"","fixed-header":"",style:{"max-height":"600px"},items:s(B),"item-value":"id",ref_key:"dataTableRef",ref:c,headers:g,class:"text-no-wrap rounded-0",density:"default"},{"item.actions":a(({item:l})=>[e(y,{size:"small",onClick:Y=>W(l),color:"primary"},{default:a(()=>[e(q,{icon:"ri-edit-box-line"}),e(I,{activator:"parent",location:"top"},{default:a(()=>[f(" Edit ")]),_:1})]),_:2},1032,["onClick"]),e(y,{size:"small",onClick:Y=>{v.value=!0,_(d)?d.value=l.id:d=l.id},color:"error"},{default:a(()=>[e(q,{icon:"ri-delete-bin-7-line"}),e(I,{activator:"parent",location:"top"},{default:a(()=>[f(" Delete ")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1}),e(me,{isDrawerOpen:s(D),"onUpdate:isDrawerOpen":o[1]||(o[1]=l=>_(D)?D.value=l:null),onBrandData:J,ref_key:"addNewBrandDrawerRef",ref:m,errors:s(O)},null,8,["isDrawerOpen","errors"]),e(pe,{isDrawerOpen:s(r),"onUpdate:isDrawerOpen":o[2]||(o[2]=l=>_(r)?r.value=l:null),onBrandData:Q,brand:s(i),ref_key:"editBrandDrawerRef",ref:u,errors:s(O)},null,8,["isDrawerOpen","brand","errors"]),e(de,{modelValue:s(t),"onUpdate:modelValue":o[4]||(o[4]=l=>_(t)?t.value=l:null)},{actions:a(()=>[e(C,{color:"error",onClick:o[3]||(o[3]=l=>t.value=!1)},{default:a(()=>[f(" Close ")]),_:1})]),default:a(()=>[f(te(s(p))+" ",1)]),_:1},8,["modelValue"]),e(ue,{modelValue:s(v),"onUpdate:modelValue":o[8]||(o[8]=l=>_(v)?v.value=l:null),width:"400"},{default:a(()=>[e(T,{title:"Confirmation",class:"pb-5"},{default:a(()=>[e(N,{variant:"text",size:"default",onClick:o[5]||(o[5]=l=>v.value=!1)}),e(S,null,{default:a(()=>[f(" Are you sure you want to delete this brand? ")]),_:1}),e(S,{class:"d-flex align-center justify-center gap-4"},{default:a(()=>[e(C,{variant:"elevated",onClick:o[6]||(o[6]=l=>X()),color:"error"},{default:a(()=>[f(" Confirm ")]),_:1}),e(C,{color:"secondary",variant:"outlined",onClick:o[7]||(o[7]=l=>v.value=!1)},{default:a(()=>[f(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{oa as default};
