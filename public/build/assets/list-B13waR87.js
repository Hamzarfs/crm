import{_ as Z}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-DcuUperp.js";import{r as z}from"./validators-Z6BjoYpS.js";import{d as E,r as s,o as A,g as H,f as a,b as e,n,aG as w,aL as L,ai as b,p,aK as F,w as ee,aM as ae,c as oe,a0 as M,v as le,e as re,a as te}from"./main-FCzYu4Z5.js";import{_ as P}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-BVcUhHbr.js";import{V as q}from"./VDivider-knA9H03k.js";import{b as T,V as U,c as se}from"./VCard-Do568HRS.js";import{V as h}from"./VForm-DAROEqCA.js";import{V as j,a as B}from"./VRow-DcbkzY-u.js";import{V as G}from"./VTextField-JeOZvJkP.js";import{V as K}from"./VNavigationDrawer-Ae1xKXtE.js";import{$ as S}from"./api-CRIIns0m.js";import{V as ie}from"./VSpacer-DgLf_p26.js";import{V as ne}from"./VDataTable-BGPZE7tW.js";import{V as I}from"./VTooltip-SL5-U2jd.js";import{V as de}from"./VSnackbar-xVpasArO.js";import{V as ue}from"./VDialog-BbF2kOnV.js";import"./helpers-BO_WrFPz.js";import"./VAvatar-CP8SEjMm.js";import"./VImg-CJF-w0vk.js";import"./InputIcon-wsmb1BjU.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              *//* empty css                   */import"./VCounter-fwUCpOxO.js";import"./VField-Dk2Ak1ql.js";import"./easing-CjukEv2V.js";import"./VInput-B2EWUdv0.js";import"./delay-ghhtiNk_.js";import"./scopeId-C8kA2Rpd.js";import"./ssrBoot-CaII-3XN.js";import"./index-9rIf2CJL.js";import"./VPagination-ABgY-7nO.js";import"./VSelect-B3zOJvEu.js";import"./VList-DBeUyEP9.js";import"./dialog-transition-CkzesdKy.js";import"./VMenu-B6LO-Wa5.js";import"./VOverlay-CJoYV0aa.js";import"./lazy-s9MkjEdz.js";import"./VCheckboxBtn-B0Ml4Fv6.js";import"./VSelectionControl-CjMQjtTf.js";import"./VChip-ChL126MO.js";import"./VSlideGroup-CrEC992E.js";import"./VTable-DTLm3gSp.js";import"./filter-D7wIZvCz.js";const me=E({__name:"AddNewRoleDrawer",props:{isDrawerOpen:{type:Boolean},errors:{}},emits:["update:isDrawerOpen","roleData"],setup(O,{expose:_,emit:C}){const f=O,d=C,v=s(!1),m=s(),u=s(""),c=()=>{d("update:isDrawerOpen",!1),F(()=>{var o,l;(o=m.value)==null||o.reset(),(l=m.value)==null||l.resetValidation()})},k=()=>{var o;(o=m.value)==null||o.validate().then(({valid:l})=>{l&&d("roleData",{name:u.value})})};_({closeNavigationDrawer:c});const g=o=>{d("update:isDrawerOpen",o)};return(o,l)=>{const D=P;return A(),H(K,{temporary:"",width:400,location:"end","model-value":f.isDrawerOpen,"onUpdate:modelValue":g},{default:a(()=>[e(D,{title:"Add Role",onCancel:c}),e(q),e(U,{flat:""},{default:a(()=>[e(T,null,{default:a(()=>[e(h,{ref_key:"refForm",ref:m,modelValue:n(v),"onUpdate:modelValue":l[1]||(l[1]=i=>w(v)?v.value=i:null),onSubmit:L(k,["prevent"])},{default:a(()=>[e(j,null,{default:a(()=>[e(B,{cols:"12"},{default:a(()=>[e(G,{modelValue:n(u),"onUpdate:modelValue":l[0]||(l[0]=i=>w(u)?u.value=i:null),rules:["requiredValidator"in o?o.requiredValidator:n(z)],label:"Name","error-messages":f.errors.name,placeholder:"Maintainer"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(B,{cols:"12"},{default:a(()=>[e(b,{type:"submit",class:"me-4"},{default:a(()=>[p(" Submit ")]),_:1}),e(b,{type:"reset",variant:"outlined",color:"error",onClick:c},{default:a(()=>[p(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),pe=E({__name:"EditRoleDrawer",props:{isDrawerOpen:{type:Boolean},errors:{},role:{}},emits:["update:isDrawerOpen","roleData"],setup(O,{expose:_,emit:C}){const f=O,d=C,v=s(!1),m=s(),u=s(f.role.name);ee(()=>f.role,o=>{u.value=o.title},{immediate:!0,deep:!0});const c=()=>{d("update:isDrawerOpen",!1),F(()=>{var o,l;(o=m.value)==null||o.reset(),(l=m.value)==null||l.resetValidation()})},k=()=>{var o;(o=m.value)==null||o.validate().then(({valid:l})=>{l&&d("roleData",{id:f.role.id,name:u.value})})};_({closeNavigationDrawer:c});const g=o=>{d("update:isDrawerOpen",o)};return(o,l)=>{const D=P;return A(),H(K,{temporary:"",width:400,location:"end","model-value":f.isDrawerOpen,"onUpdate:modelValue":g},{default:a(()=>[e(D,{title:"Edit Role",onCancel:c}),e(q),e(U,{flat:""},{default:a(()=>[e(T,null,{default:a(()=>[e(h,{ref_key:"refForm",ref:m,modelValue:n(v),"onUpdate:modelValue":l[1]||(l[1]=i=>w(v)?v.value=i:null),onSubmit:L(k,["prevent"])},{default:a(()=>[e(j,null,{default:a(()=>[e(B,{cols:"12"},{default:a(()=>[e(G,{modelValue:n(u),"onUpdate:modelValue":l[0]||(l[0]=i=>w(u)?u.value=i:null),rules:["requiredValidator"in o?o.requiredValidator:n(z)],label:"Name","error-messages":f.errors.name,placeholder:"Maintainer"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(B,{cols:"12"},{default:a(()=>[e(b,{type:"submit",class:"me-4"},{default:a(()=>[p(" Submit ")]),_:1}),e(b,{type:"reset",variant:"outlined",color:"error",onClick:c},{default:a(()=>[p(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),fe=re("span",null,"Roles",-1),ra=E({__name:"list",async setup(O){let _,C;const f=s({name:""});let d,v;const m=s(),u=s(),c=s(),k=[{title:"ID",key:"id"},{title:"Name",key:"title"},{title:"Actions",key:"actions",sortable:!1}],{roles:g}=([_,C]=ae(()=>S("roles")),_=await _,C(),_),o=s(g),l=s(!1),D=s(!1),i=s(!1),R=s(!1);let N;const J=async V=>{const{success:r,message:y,role:x}=await S("/roles",{method:"POST",body:V,onResponseError({response:t}){$.value=t._data.errors}});r&&(i.value=!0,o.value=[...o.value,x],N=y,m.value.closeNavigationDrawer(),F(()=>{c.value.$el.querySelector(".v-table__wrapper").scrollTop=c.value.$el.querySelector(".v-table__wrapper").scrollHeight}))},Q=async V=>{const{success:r,message:y,role:x}=await S(`roles/${V.id}`,{method:"PUT",body:V,onResponseError({response:t}){$.value=t._data.errors}});r&&(i.value=!0,o.value[v]=x,N=y,u.value.closeNavigationDrawer())},W=V=>{f.value=V,v=o.value.indexOf(V),D.value=!0},X=async()=>{const{success:V,message:r}=await S(`roles/${d}`,{method:"DELETE"});R.value=!1,V&&(i.value=!0,N=r,o.value=o.value.filter(y=>y.id!==d))},$=s({name:void 0});return(V,r)=>{const y=te("IconBtn"),x=Z;return A(),oe("section",null,[e(U,{class:"mb-6"},{default:a(()=>[e(se,{class:"d-flex align-center my-2"},{default:a(()=>[fe,e(ie),e(b,{onClick:r[0]||(r[0]=t=>l.value=!0),"prepend-icon":"ri-user-add-fill"},{default:a(()=>[p(" Add New Role ")]),_:1})]),_:1}),e(q),e(ne,{hover:"","fixed-header":"",style:{"max-height":"600px"},items:n(o),"item-value":"id",ref_key:"dataTableRef",ref:c,headers:k,class:"text-no-wrap rounded-0",density:"default"},{"item.actions":a(({item:t})=>[e(y,{size:"small",onClick:Y=>W(t),color:"primary",disabled:t.id>=1&&t.id<=7},{default:a(()=>[e(M,{icon:"ri-edit-box-line"}),e(I,{activator:"parent",location:"top"},{default:a(()=>[p(" Edit ")]),_:1})]),_:2},1032,["onClick","disabled"]),e(y,{size:"small",onClick:Y=>{R.value=!0,w(d)?d.value=t.id:d=t.id},color:"error",disabled:t.id>=1&&t.id<=7},{default:a(()=>[e(M,{icon:"ri-delete-bin-7-line"}),e(I,{activator:"parent",location:"top"},{default:a(()=>[p(" Delete ")]),_:1})]),_:2},1032,["onClick","disabled"])]),_:1},8,["items"])]),_:1}),e(me,{isDrawerOpen:n(l),"onUpdate:isDrawerOpen":r[1]||(r[1]=t=>w(l)?l.value=t:null),onRoleData:J,ref_key:"addNewRoleDrawerRef",ref:m,errors:n($)},null,8,["isDrawerOpen","errors"]),e(pe,{isDrawerOpen:n(D),"onUpdate:isDrawerOpen":r[2]||(r[2]=t=>w(D)?D.value=t:null),onRoleData:Q,role:n(f),ref_key:"editRoleDrawerRef",ref:u,errors:n($)},null,8,["isDrawerOpen","role","errors"]),e(de,{modelValue:n(i),"onUpdate:modelValue":r[4]||(r[4]=t=>w(i)?i.value=t:null)},{actions:a(()=>[e(b,{color:"error",onClick:r[3]||(r[3]=t=>i.value=!1)},{default:a(()=>[p(" Close ")]),_:1})]),default:a(()=>[p(le(n(N))+" ",1)]),_:1},8,["modelValue"]),e(ue,{modelValue:n(R),"onUpdate:modelValue":r[8]||(r[8]=t=>w(R)?R.value=t:null),width:"400"},{default:a(()=>[e(U,{title:"Confirmation",class:"pb-5"},{default:a(()=>[e(x,{variant:"text",size:"default",onClick:r[5]||(r[5]=t=>R.value=!1)}),e(T,null,{default:a(()=>[p(" Are you sure you want to delete this role? ")]),_:1}),e(T,{class:"d-flex align-center justify-center gap-4"},{default:a(()=>[e(b,{variant:"elevated",onClick:r[6]||(r[6]=t=>X()),color:"error"},{default:a(()=>[p(" Confirm ")]),_:1}),e(b,{color:"secondary",variant:"outlined",onClick:r[7]||(r[7]=t=>R.value=!1)},{default:a(()=>[p(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{ra as default};
