import{a as ie,d as ne}from"./formatters-DvWGt13L.js";import{p as ue}from"./paginationMeta-BbY5dJ0C.js";import{r as q,e as de,n as me}from"./validators-Z6BjoYpS.js";import{d as ae,r as i,o as L,g as W,f as a,b as e,n as t,aG as c,aL as pe,ai as R,p as h,aK as ce,aM as fe,Z as Q,c as I,e as d,F as ve,i as Ve,v,a0 as S,a as Z,z as ge}from"./main-DoQFmMsa.js";import{_ as he}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-BjbO3N_D.js";import{C as be}from"./vue3-perfect-scrollbar-Dah25qMm.js";import{V as j}from"./VDivider-CiGpRMeQ.js";import{V as G,b as T}from"./VCard-CvMXks-w.js";import{V as we}from"./VForm-MqJCh6j8.js";import{V as H,a as V}from"./VRow-CBIZXy0V.js";import{V as E}from"./VTextField-C5K-JLC3.js";import{V as k}from"./VSelect-DD45070D.js";import{V as _e}from"./VNavigationDrawer-C1kAe-dV.js";import{u as ye}from"./useApi-CYcmTCPZ.js";import{c as xe}from"./createUrl-Bwjf_k-d.js";import{$ as X}from"./api-B6c1NHMd.js";import{V as Ue}from"./VSpacer-DO_vufVD.js";import{V as Se}from"./VDataTableServer-Bfaih1x0.js";import{V as Y}from"./VAvatar-A7ztkq2k.js";import{V as ke}from"./VImg-BvvxBpKO.js";import{V as Ce}from"./VChip-D3GIz1VX.js";import{V as De}from"./VMenu-Dwo0kCga.js";import{V as Pe,a as ee,b as le}from"./VList-jAkofN4n.js";import"./helpers-BO_WrFPz.js";import"./InputIcon-C91L1USK.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              *//* empty css                   */import"./VCounter-OXl0Qa9T.js";import"./VField-BD5A6g5X.js";import"./easing-CjukEv2V.js";import"./VInput-j0tWo3aL.js";import"./dialog-transition-Cr9rcsZj.js";import"./VOverlay-BtLUM5vY.js";import"./delay-Dhu81iSy.js";import"./lazy-CojwJwNx.js";import"./scopeId-C1Mw3z0g.js";import"./VCheckboxBtn-ybuIpKJx.js";import"./VSelectionControl-CA9osU1B.js";import"./ssrBoot-CpQaGIBj.js";import"./index-9rIf2CJL.js";import"./VDataTable-Cq00Lau-.js";import"./VPagination-Bz8XJ3Wz.js";import"./VTable-XmEDbQ3e.js";import"./filter--_JGeJ5X.js";import"./VSlideGroup-DZ8i23BH.js";const Ae=ae({__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean},status:{},roles:{},departments:{},errors:{}},emits:["update:isDrawerOpen","userData"],setup(J,{expose:C,emit:z}){const f=J,w=z,_=i(!1),b=i(),p=i(""),n=i(""),y=i(),x=i(""),g=i(),D=i(),M=f.roles.map(o=>({title:o.title,value:o.id})),B=f.departments.map(o=>({title:o.title,value:o.id})),P=()=>{w("update:isDrawerOpen",!1),ce(()=>{var o,r;(o=b.value)==null||o.reset(),(r=b.value)==null||r.resetValidation()})},O=()=>{var o;(o=b.value)==null||o.validate().then(({valid:r})=>{r&&w("userData",{name:p.value,email:n.value,phone:x.value,role:g.value,department:y.value,status:D.value})})};C({closeNavigationDrawer:P});const U=o=>{w("update:isDrawerOpen",o)};return(o,r)=>{const F=he;return L(),W(_e,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen,"onUpdate:modelValue":U},{default:a(()=>[e(F,{title:"Add Employee",onCancel:P}),e(j),e(t(be),{options:{wheelPropagation:!1}},{default:a(()=>[e(G,{flat:""},{default:a(()=>[e(T,null,{default:a(()=>[e(we,{ref_key:"refForm",ref:b,modelValue:t(_),"onUpdate:modelValue":r[6]||(r[6]=m=>c(_)?_.value=m:null),onSubmit:pe(O,["prevent"])},{default:a(()=>[e(H,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(E,{modelValue:t(p),"onUpdate:modelValue":r[0]||(r[0]=m=>c(p)?p.value=m:null),rules:["requiredValidator"in o?o.requiredValidator:t(q)],label:"Full Name","error-messages":f.errors.name,placeholder:"John Doe"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(E,{modelValue:t(n),"onUpdate:modelValue":r[1]||(r[1]=m=>c(n)?n.value=m:null),rules:["requiredValidator"in o?o.requiredValidator:t(q),"emailValidator"in o?o.emailValidator:t(de)],label:"Email","error-messages":f.errors.email,placeholder:"johndoe@email.com"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(E,{modelValue:t(x),"onUpdate:modelValue":r[2]||(r[2]=m=>c(x)?x.value=m:null),type:"number",rules:["numberValidator"in o?o.numberValidator:t(me)],label:"Phone Number",placeholder:"03001234567"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(k,{modelValue:t(y),"onUpdate:modelValue":r[3]||(r[3]=m=>c(y)?y.value=m:null),label:"Select Department",placeholder:"Select Department",rules:["requiredValidator"in o?o.requiredValidator:t(q)],items:t(B)},null,8,["modelValue","rules","items"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(k,{modelValue:t(g),"onUpdate:modelValue":r[4]||(r[4]=m=>c(g)?g.value=m:null),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in o?o.requiredValidator:t(q)],items:t(M)},null,8,["modelValue","rules","items"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(k,{modelValue:t(D),"onUpdate:modelValue":r[5]||(r[5]=m=>c(D)?D.value=m:null),label:"Select Status",placeholder:"Select Status",rules:["requiredValidator"in o?o.requiredValidator:t(q)],items:f.status},null,8,["modelValue","rules","items"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(R,{type:"submit",class:"me-4"},{default:a(()=>[h(" Submit ")]),_:1}),e(R,{type:"reset",variant:"outlined",color:"error",onClick:P},{default:a(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),Le={class:"d-flex mb-6"},Re={class:"d-flex justify-space-between"},qe={class:"d-flex flex-column gap-y-1"},ze={class:"text-base text-high-emphasis"},Be={class:"text-h4 d-flex align-center gap-2"},Ne={class:"text-sm mb-0"},Te={class:"app-user-search-filter d-flex align-center"},Ee={class:"d-flex align-centeraa"},Me={key:1},Oe={class:"d-flex flex-column"},Fe={class:"text-sm text-medium-emphasis"},$e={class:"d-flex gap-4"},Ie={class:"text-capitalize text-high-emphasis"},We={class:"text-capitalize text-high-emphasis"},je={class:"d-flex justify-end flex-wrap gap-x-6 px-2 py-1"},Ge={class:"d-flex align-center gap-x-2 text-medium-emphasis text-base"},He={class:"d-flex align-center text-base text-high-emphasis me-2 mb-0"},Je={class:"d-flex gap-x-2 align-center me-2"},Fl=ae({__name:"index",async setup(J){let C,z;const f=i(""),w=i(),_=i(),b=i(),p=i(10),n=i(1),y=i(),x=i(),g=i([]),D=u=>{var s,A;y.value=(s=u.sortBy[0])==null?void 0:s.key,x.value=(A=u.sortBy[0])==null?void 0:A.order},M=[{title:"User",key:"user"},{title:"Email",key:"email"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:B,execute:P}=([C,z]=fe(()=>ye(xe("/apps/users",{query:{q:f,status:b,plan:_,role:w,itemsPerPage:p,page:n,sortBy:y,orderBy:x}}))),C=await C,z(),C),O=Q(()=>B.value.users),U=Q(()=>B.value.totalUsers),o=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],r=[{title:"Basic",value:"basic"},{title:"Company",value:"company"},{title:"Enterprise",value:"enterprise"},{title:"Team",value:"team"}],F=[{title:"Pending",value:"pending"},{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],m=u=>{const s=u.toLowerCase();return s==="subscriber"?{color:"success",icon:"ri-user-line"}:s==="author"?{color:"error",icon:"ri-computer-line"}:s==="maintainer"?{color:"info",icon:"ri-pie-chart-line"}:s==="editor"?{color:"warning",icon:"ri-edit-box-line"}:s==="admin"?{color:"primary",icon:"ri-vip-crown-line"}:{color:"success",icon:"ri-user-line"}},te=u=>{const s=u.toLowerCase();return s==="pending"?"warning":s==="active"?"success":s==="inactive"?"secondary":"primary"},N=i(!1),se=async u=>{await X("/apps/users",{method:"POST",body:u}),P()},oe=async u=>{await X(`/apps/users/${u}`,{method:"DELETE"});const s=g.value.findIndex(A=>A===u);s!==-1&&g.value.splice(s,1),P()},re=i([{title:"Session",value:"21,459",change:29,desc:"Total Users",icon:"ri-group-line",iconColor:"primary"},{title:"Paid Users",value:"4,567",change:18,desc:"Last Week Analytics",icon:"ri-user-add-line",iconColor:"error"},{title:"Active Users",value:"19,860",change:-14,desc:"Last Week Analytics",icon:"ri-user-follow-line",iconColor:"success"},{title:"Pending Users",value:"237",change:42,desc:"Last Week Analytics",icon:"ri-user-search-line",iconColor:"warning"}]);return(u,s)=>{const A=Z("RouterLink"),$=Z("IconBtn");return L(),I("section",null,[d("div",Le,[e(H,null,{default:a(()=>[(L(!0),I(ve,null,Ve(t(re),(l,K)=>(L(),W(V,{key:K,cols:"12",md:"3",sm:"6"},{default:a(()=>[e(G,null,{default:a(()=>[e(T,null,{default:a(()=>[d("div",Re,[d("div",qe,[d("span",ze,v(l.title),1),d("h4",Be,[h(v(l.value)+" ",1),d("span",{class:ge(["text-base font-weight-regular",l.change>0?"text-success":"text-error"])},"("+v(("prefixWithPlus"in u?u.prefixWithPlus:t(ne))(l.change))+"%)",3)]),d("p",Ne,v(l.desc),1)]),e(Y,{color:l.iconColor,variant:"tonal",rounded:"",size:"42"},{default:a(()=>[e(S,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),e(G,{title:"Filters",class:"mb-6"},{default:a(()=>[e(T,null,{default:a(()=>[e(H,null,{default:a(()=>[e(V,{cols:"12",sm:"4"},{default:a(()=>[e(k,{modelValue:t(w),"onUpdate:modelValue":s[0]||(s[0]=l=>c(w)?w.value=l:null),label:"Select Role",placeholder:"Select Role",items:o,clearable:"","clear-icon":"ri-close-line"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"4"},{default:a(()=>[e(k,{modelValue:t(_),"onUpdate:modelValue":s[1]||(s[1]=l=>c(_)?_.value=l:null),label:"Select Plan",placeholder:"Select Plan",items:r,clearable:"","clear-icon":"ri-close-line"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"4"},{default:a(()=>[e(k,{modelValue:t(b),"onUpdate:modelValue":s[2]||(s[2]=l=>c(b)?b.value=l:null),label:"Select Status",placeholder:"Select Status",items:F,clearable:"","clear-icon":"ri-close-line"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(j),e(T,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(R,{variant:"outlined",color:"secondary","prepend-icon":"ri-upload-2-line"},{default:a(()=>[h(" Export ")]),_:1}),e(Ue),d("div",Te,[e(E,{modelValue:t(f),"onUpdate:modelValue":s[3]||(s[3]=l=>c(f)?f.value=l:null),placeholder:"Search User",density:"compact",class:"me-4"},null,8,["modelValue"]),e(R,{onClick:s[4]||(s[4]=l=>N.value=!0)},{default:a(()=>[h(" Add New User ")]),_:1})])]),_:1}),e(Se,{"items-per-page":t(p),"onUpdate:itemsPerPage":s[8]||(s[8]=l=>c(p)?p.value=l:null),"model-value":t(g),"onUpdate:modelValue":s[9]||(s[9]=l=>c(g)?g.value=l:null),page:t(n),"onUpdate:page":s[10]||(s[10]=l=>c(n)?n.value=l:null),items:t(O),"item-value":"id","items-length":t(U),headers:M,"show-select":"",class:"text-no-wrap rounded-0","onUpdate:options":D},{"item.user":a(({item:l})=>[d("div",Ee,[e(Y,{size:"34",variant:l.avatar?void 0:"tonal",color:l.avatar?void 0:m(l.role).color,class:"me-3"},{default:a(()=>[l.avatar?(L(),W(ke,{key:0,src:l.avatar},null,8,["src"])):(L(),I("span",Me,v(("avatarText"in u?u.avatarText:t(ie))(l.fullName)),1))]),_:2},1032,["variant","color"]),d("div",Oe,[e(A,{to:{name:"apps-user-view-id",params:{id:l.id}},class:"text-h6 font-weight-medium user-list-name"},{default:a(()=>[h(v(l.fullName),1)]),_:2},1032,["to"]),d("span",Fe,"@"+v(l.username),1)])])]),"item.role":a(({item:l})=>[d("div",$e,[e(S,{icon:m(l.role).icon,color:m(l.role).color},null,8,["icon","color"]),d("span",Ie,v(l.role),1)])]),"item.plan":a(({item:l})=>[d("span",We,v(l.currentPlan),1)]),"item.status":a(({item:l})=>[e(Ce,{color:te(l.status),size:"small",class:"text-capitalize"},{default:a(()=>[h(v(l.status),1)]),_:2},1032,["color"])]),"item.actions":a(({item:l})=>[e($,{size:"small",onClick:K=>oe(l.id)},{default:a(()=>[e(S,{icon:"ri-delete-bin-7-line"})]),_:2},1032,["onClick"]),e($,{size:"small",to:{name:"apps-user-view-id",params:{id:l.id}}},{default:a(()=>[e(S,{icon:"ri-eye-line"})]),_:2},1032,["to"]),e($,{size:"small",color:"medium-emphasis"},{default:a(()=>[e(S,{size:"24",icon:"ri-more-2-line"}),e(De,{activator:"parent"},{default:a(()=>[e(Pe,null,{default:a(()=>[e(ee,{link:""},{prepend:a(()=>[e(S,{icon:"ri-download-line"})]),default:a(()=>[e(le,null,{default:a(()=>[h("Download")]),_:1})]),_:1}),e(ee,{link:""},{prepend:a(()=>[e(S,{icon:"ri-edit-box-line"})]),default:a(()=>[e(le,null,{default:a(()=>[h("Edit")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),bottom:a(()=>[e(j),d("div",je,[d("div",Ge,[h(" Rows Per Page: "),e(k,{modelValue:t(p),"onUpdate:modelValue":s[5]||(s[5]=l=>c(p)?p.value=l:null),class:"per-page-select",variant:"plain",items:[10,20,25,50,100]},null,8,["modelValue"])]),d("p",He,v(("paginationMeta"in u?u.paginationMeta:t(ue))({page:t(n),itemsPerPage:t(p)},t(U))),1),d("div",Je,[e(R,{class:"flip-in-rtl",icon:"ri-arrow-left-s-line",variant:"text",density:"comfortable",color:"high-emphasis",disabled:t(n)<=1,onClick:s[6]||(s[6]=l=>t(n)<=1?n.value=1:n.value--)},null,8,["disabled"]),e(R,{class:"flip-in-rtl",icon:"ri-arrow-right-s-line",density:"comfortable",variant:"text",color:"high-emphasis",disabled:t(n)>=Math.ceil(t(U)/t(p)),onClick:s[7]||(s[7]=l=>t(n)>=Math.ceil(t(U)/t(p))?n.value=Math.ceil(t(U)/t(p)):n.value++)},null,8,["disabled"])])])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(Ae,{isDrawerOpen:t(N),"onUpdate:isDrawerOpen":s[11]||(s[11]=l=>c(N)?N.value=l:null),onUserData:se},null,8,["isDrawerOpen"])])}}});export{Fl as default};
