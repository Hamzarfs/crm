import{_ as me}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-BH4UBKf3.js";import{V as J,b as T}from"./VCard-CvMXks-w.js";import{V as ce}from"./VForm-MqJCh6j8.js";import{V as ie}from"./VTextField-C5K-JLC3.js";import{V as pe}from"./VTable-XmEDbQ3e.js";import{V as N}from"./VCheckbox-CMyJEiVW.js";import{d as Q,r as p,Z as K,w as O,o as _,g as R,f as t,b as e,e as a,v as V,n as l,aG as w,c as k,F as I,i as Y,ai as z,p as U,a as ee,x as Z,a0 as M,aM as fe}from"./main-DoQFmMsa.js";import{V as _e}from"./VDialog-q404EtSX.js";import{a as B}from"./avatar-1-BpD18F9D.js";import{a as S}from"./avatar-2-7Cb1ulCk.js";import{a as F}from"./avatar-3-D1OxVER-.js";import{a as L}from"./avatar-4-DTtpEczF.js";import{a as q}from"./avatar-5-Dlv_vFhH.js";import{a as H}from"./avatar-6-CtsY7J5w.js";import{a as se}from"./avatar-7-mVVn6NIv.js";import{a as ve}from"./avatar-8-D64qtsE2.js";import{a as D,V as te}from"./VRow-CBIZXy0V.js";import{V as ae}from"./VSpacer-DO_vufVD.js";import{V as G}from"./VAvatar-A7ztkq2k.js";import{a as ge}from"./formatters-DvWGt13L.js";import{p as he}from"./paginationMeta-BbY5dJ0C.js";import{u as Ve}from"./useApi-CYcmTCPZ.js";import{c as xe}from"./createUrl-Bwjf_k-d.js";import{$ as ye}from"./api-B6c1NHMd.js";import{V as le}from"./VSelect-DD45070D.js";import{V as be}from"./VDataTableServer-Bfaih1x0.js";import{V as we}from"./VImg-BvvxBpKO.js";import{V as $e}from"./VChip-D3GIz1VX.js";import{V as Ce}from"./VMenu-Dwo0kCga.js";import{V as Ue,a as re,b as oe}from"./VList-jAkofN4n.js";import{V as ke}from"./VDivider-CiGpRMeQ.js";import"./InputIcon-C91L1USK.js";import"./forwardRefs-C-GTDzx5.js";/* empty css                   */import"./VCounter-OXl0Qa9T.js";import"./VField-BD5A6g5X.js";import"./easing-CjukEv2V.js";import"./VInput-j0tWo3aL.js";import"./VCheckboxBtn-ybuIpKJx.js";import"./VSelectionControl-CA9osU1B.js";import"./VOverlay-BtLUM5vY.js";import"./delay-Dhu81iSy.js";import"./lazy-CojwJwNx.js";import"./scopeId-C1Mw3z0g.js";import"./dialog-transition-Cr9rcsZj.js";/* empty css              */import"./helpers-BO_WrFPz.js";import"./index-9rIf2CJL.js";import"./VDataTable-Cq00Lau-.js";import"./VPagination-Bz8XJ3Wz.js";import"./filter--_JGeJ5X.js";import"./VSlideGroup-DZ8i23BH.js";import"./ssrBoot-CpQaGIBj.js";const Pe={class:"text-center mb-6"},Me={class:"text-h4 mb-2"},Re={class:"text-body-1"},De=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1),Ae=a("td",{class:"text-h6"}," Administrator Access ",-1),ze={colspan:"3"},Ee={class:"d-flex justify-end"},Be={class:"text-h6"},Se={style:{"inline-size":"5.75rem"}},Fe={class:"d-flex justify-end"},Le={style:{"inline-size":"5.75rem"}},Ie={class:"d-flex justify-end"},Te={style:{"inline-size":"5.75rem"}},je={class:"d-flex justify-end"},Ne={class:"d-flex align-center justify-center gap-3 mt-6"},Oe=Q({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(j,{emit:$}){const c=j,h=$,d=p([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),x=p(!1),y=p(""),o=p(),f=K(()=>{let n=0;return d.value.forEach(m=>{Object.entries(m).forEach(([C,u])=>{C!=="name"&&u&&n++})}),n}),b=K(()=>f.value>0&&f.value<d.value.length*3);O(x,n=>{d.value=d.value.map(m=>({...m,read:n,write:n,create:n}))}),O(b,()=>{b.value||(x.value=!1)}),O(d,()=>{f.value===d.value.length*3&&(x.value=!0)},{deep:!0}),O(()=>c,()=>{c.rolePermissions&&c.rolePermissions.permissions.length&&(y.value=c.rolePermissions.name,d.value=d.value.map(n=>{var C;const m=(C=c.rolePermissions)==null?void 0:C.permissions.find(u=>u.name===n.name);return m?{...n,...m}:n}))});const i=()=>{var m;const n={name:y.value,permissions:d.value};h("update:rolePermissions",n),h("update:isDialogVisible",!1),x.value=!1,(m=o.value)==null||m.reset()},v=()=>{var n;h("update:isDialogVisible",!1),x.value=!1,(n=o.value)==null||n.reset()};return(n,m)=>{const C=me;return _(),R(_e,{width:n.$vuetify.display.smAndDown?"auto":900,"model-value":c.isDialogVisible,"onUpdate:modelValue":v},{default:t(()=>[e(J,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(C,{variant:"text",size:"default",onClick:v}),e(T,{class:"mt-5"},{default:t(()=>[a("div",Pe,[a("h4",Me,V(c.rolePermissions.name?"Edit":"Add")+" Role ",1),a("p",Re,V(c.rolePermissions.name?"Edit":"Add")+" Role ",1)]),e(l(ce),{ref_key:"refPermissionForm",ref:o},{default:t(()=>[e(ie,{modelValue:l(y),"onUpdate:modelValue":m[0]||(m[0]=u=>w(y)?y.value=u:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),De,e(pe,{class:"permission-table text-no-wrap"},{default:t(()=>[a("tr",null,[Ae,a("td",ze,[a("div",Ee,[e(N,{modelValue:l(x),"onUpdate:modelValue":m[1]||(m[1]=u=>w(x)?x.value=u:null),indeterminate:l(b),"onUpdate:indeterminate":m[2]||(m[2]=u=>w(b)?b.value=u:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(_(!0),k(I,null,Y(l(d),u=>(_(),k("tr",{key:u.name},[a("td",Be,V(u.name),1),a("td",Se,[a("div",Fe,[e(N,{modelValue:u.read,"onUpdate:modelValue":P=>u.read=P,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",Le,[a("div",Ie,[e(N,{modelValue:u.write,"onUpdate:modelValue":P=>u.write=P,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",Te,[a("div",je,[e(N,{modelValue:u.create,"onUpdate:modelValue":P=>u.create=P,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Ne,[e(z,{onClick:i},{default:t(()=>[U(" Submit ")]),_:1}),e(z,{color:"secondary",variant:"outlined",onClick:v},{default:t(()=>[U(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),qe="/build/assets/avatar-2-DCJB4Ubn.png",Ge="/build/assets/avatar-1-CxOKCzdw.png",Je="/build/assets/pose_m1-CouyXeES.png",Ke={class:"v-avatar-group"},Qe={class:"text-high-emphasis"},We={class:"text-h5 mb-1"},Xe={class:"d-flex align-center"},Ze=["onClick"],He=["src"],Ye=a("span",{class:"text-end"},"Add role, if it doesn't exist.",-1),et=Q({__name:"RoleCards",setup(j){const $=p([{role:"Administrator",users:[B,S,F,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,S,F,L,q,H,se],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,S,F,L,q],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,S,F,L,q,H],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,S,F,L,q,H,se,ve,Ge,qe],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),c=p(!1),h=p(),d=p(!1),x=y=>{c.value=!0,h.value=y};return(y,o)=>{const f=ee("IconBtn"),b=Oe;return _(),k(I,null,[e(te,null,{default:t(()=>[(_(!0),k(I,null,Y(l($),i=>(_(),R(D,{key:i.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(J,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[a("span",null,"Total "+V(i.users.length)+" users",1),e(ae),a("div",Ke,[(_(!0),k(I,null,Y(i.users,(v,n)=>(_(),k(I,{key:v},[i.users.length>4&&i.users.length!==4&&n<3?(_(),R(G,{key:0,size:"40",image:v},null,8,["image"])):Z("",!0),i.users.length===4?(_(),R(G,{key:1,size:"40",image:v},null,8,["image"])):Z("",!0)],64))),128)),i.users.length>4?(_(),R(G,{key:0,color:y.$vuetify.theme.name==="dark"?"#3F3B59":"#F0EFF0"},{default:t(()=>[a("span",Qe," +"+V(i.users.length-3),1)]),_:2},1032,["color"])):Z("",!0)])]),_:2},1024),e(T,null,{default:t(()=>[a("h5",We,V(i.role),1),a("div",Xe,[a("a",{href:"javascript:void(0)",onClick:v=>x(i.details)}," Edit Role ",8,Ze),e(ae),e(f,{color:"secondary",class:"mt-n2"},{default:t(()=>[e(M,{icon:"ri-file-copy-line"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(D,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(J,{class:"h-100",ripple:!1},{default:t(()=>[e(te,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(D,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"65",src:l(Je)},null,8,He)]),_:1}),e(D,{cols:"7"},{default:t(()=>[e(T,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(z,{size:"small",onClick:o[0]||(o[0]=i=>d.value=!0)},{default:t(()=>[U(" Add Role ")]),_:1}),Ye]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{"is-dialog-visible":l(d),"onUpdate:isDialogVisible":o[1]||(o[1]=i=>w(d)?d.value=i:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(b,{"is-dialog-visible":l(c),"onUpdate:isDialogVisible":o[2]||(o[2]=i=>w(c)?c.value=i:null),"role-permissions":l(h),"onUpdate:rolePermissions":o[3]||(o[3]=i=>w(h)?h.value=i:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),tt={class:"d-flex flex-wrap gap-4"},at={style:{"inline-size":"15.625rem"}},st={style:{"inline-size":"10rem"}},lt={class:"d-flex"},rt={key:1},ot={class:"d-flex flex-column"},it={class:"text-sm"},nt={class:"d-flex gap-4"},dt={class:"text-h6 text-capitalize font-weight-regular"},ut={class:"text-h6 font-weight-regular text-capitalize"},mt={class:"d-flex justify-end flex-wrap gap-x-6 px-2 py-1"},ct={class:"d-flex align-center gap-x-2 text-medium-emphasis text-base"},pt={class:"d-flex align-center text-base text-high-emphasis me-2 mb-0"},ft={class:"d-flex gap-x-2 align-center me-2"},_t=Q({__name:"UserList",async setup(j){let $,c;const h=p(""),d=p(),x=p(),y=p(),o=p(10),f=p(1),b=p(),i=p(),v=p([]),n=g=>{var r,A;b.value=(r=g.sortBy[0])==null?void 0:r.key,i.value=(A=g.sortBy[0])==null?void 0:A.order},m=[{title:"User",key:"user"},{title:"Email",key:"email"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:C,execute:u}=([$,c]=fe(()=>Ve(xe("/apps/users",{query:{q:h,status:y,plan:x,role:d,itemsPerPage:o,page:f,sortBy:b,orderBy:i}}))),$=await $,c(),$),P=K(()=>C.value.users),E=K(()=>C.value.totalUsers),ne=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],W=g=>{const r=g.toLowerCase();return r==="subscriber"?{color:"success",icon:"ri-user-line"}:r==="author"?{color:"error",icon:"ri-computer-line"}:r==="maintainer"?{color:"info",icon:"ri-pie-chart-line"}:r==="editor"?{color:"warning",icon:"ri-edit-box-line"}:r==="admin"?{color:"primary",icon:"ri-vip-crown-line"}:{color:"primary",icon:"ri-user-line"}},de=g=>{const r=g.toLowerCase();return r==="pending"?"warning":r==="active"?"success":r==="inactive"?"secondary":"primary"},ue=async g=>{await ye(`/apps/users/${g}`,{method:"DELETE"});const r=v.value.findIndex(A=>A===g);r!==-1&&v.value.splice(r,1),u()};return(g,r)=>{const A=ee("RouterLink"),X=ee("IconBtn");return _(),k("section",null,[e(J,null,{default:t(()=>[e(T,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(z,{variant:"outlined",color:"secondary","prepend-icon":"ri-share-box-line"},{default:t(()=>[U(" Export ")]),_:1}),e(ae),a("div",tt,[a("div",at,[e(ie,{modelValue:l(h),"onUpdate:modelValue":r[0]||(r[0]=s=>w(h)?h.value=s:null),placeholder:"Search User",density:"compact"},null,8,["modelValue"])]),a("div",st,[e(le,{modelValue:l(d),"onUpdate:modelValue":r[1]||(r[1]=s=>w(d)?d.value=s:null),placeholder:"Select Role",items:ne,density:"compact",clearable:"","clear-icon":"ri-close-line"},null,8,["modelValue"])])])]),_:1}),e(be,{"items-per-page":l(o),"onUpdate:itemsPerPage":r[5]||(r[5]=s=>w(o)?o.value=s:null),"model-value":l(v),"onUpdate:modelValue":r[6]||(r[6]=s=>w(v)?v.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:l(P),"item-value":"id","items-length":l(E),headers:m,"show-select":"",class:"text-no-wrap rounded-0","onUpdate:options":n},{"item.user":t(({item:s})=>[a("div",lt,[e(G,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:W(s.role).color,class:"me-3"},{default:t(()=>[s.avatar?(_(),R(we,{key:0,src:s.avatar},null,8,["src"])):(_(),k("span",rt,V(("avatarText"in g?g.avatarText:l(ge))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",ot,[e(A,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"text-h6"},{default:t(()=>[U(V(s.fullName),1)]),_:2},1032,["to"]),a("span",it,"@"+V(s.username),1)])])]),"item.role":t(({item:s})=>[a("div",nt,[e(M,{size:"22",icon:W(s.role).icon,color:W(s.role).color},null,8,["icon","color"]),a("h6",dt,V(s.role),1)])]),"item.plan":t(({item:s})=>[a("h6",ut,V(s.currentPlan),1)]),"item.status":t(({item:s})=>[e($e,{color:de(s.status),size:"small",class:"text-capitalize"},{default:t(()=>[U(V(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(X,{size:"small",onClick:xt=>ue(s.id)},{default:t(()=>[e(M,{icon:"ri-delete-bin-7-line"})]),_:2},1032,["onClick"]),e(X,{size:"small",to:{name:"apps-user-view-id",params:{id:s.id}}},{default:t(()=>[e(M,{icon:"ri-eye-line"})]),_:2},1032,["to"]),e(X,{size:"small"},{default:t(()=>[e(M,{icon:"ri-more-2-line"}),e(Ce,{activator:"parent"},{default:t(()=>[e(Ue,null,{default:t(()=>[e(re,{link:""},{prepend:t(()=>[e(M,{size:"20",icon:"ri-edit-box-line"})]),default:t(()=>[e(oe,null,{default:t(()=>[U("Edit")]),_:1})]),_:1}),e(re,{link:""},{prepend:t(()=>[e(M,{size:"20",icon:"ri-download-line"})]),default:t(()=>[e(oe,null,{default:t(()=>[U("Download")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),bottom:t(()=>[e(ke),a("div",mt,[a("div",ct,[U(" Rows Per Page: "),e(le,{modelValue:l(o),"onUpdate:modelValue":r[2]||(r[2]=s=>w(o)?o.value=s:null),class:"per-page-select",variant:"plain",items:[10,20,25,50,100]},null,8,["modelValue"])]),a("p",pt,V(("paginationMeta"in g?g.paginationMeta:l(he))({page:l(f),itemsPerPage:l(o)},l(E))),1),a("div",ft,[e(z,{class:"flip-in-rtl",icon:"ri-arrow-left-s-line",variant:"text",density:"comfortable",color:"high-emphasis",disabled:l(f)<=1,onClick:r[3]||(r[3]=s=>l(f)<=1?f.value=1:f.value--)},null,8,["disabled"]),e(z,{class:"flip-in-rtl",icon:"ri-arrow-right-s-line",density:"comfortable",variant:"text",color:"high-emphasis",disabled:l(f)>=Math.ceil(l(E)/l(o)),onClick:r[4]||(r[4]=s=>l(f)>=Math.ceil(l(E)/l(o))?f.value=Math.ceil(l(E)/l(o)):f.value++)},null,8,["disabled"])])])]),_:1},8,["items-per-page","model-value","items","items-length"])]),_:1})])}}}),vt=a("h5",{class:"text-h5 mb-1"}," Roles List ",-1),gt=a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),ht=a("h5",{class:"text-h5 mt-6"}," Total users with their roles ",-1),Vt=a("p",{class:"text-body-1 mb-6"}," Find all of your company's administrator accounts and their associate roles. ",-1),xa=Q({__name:"index",setup(j){return($,c)=>(_(),R(te,null,{default:t(()=>[e(D,{cols:"12"},{default:t(()=>[vt,gt]),_:1}),e(D,{cols:"12"},{default:t(()=>[e(et)]),_:1}),e(D,{cols:"12"},{default:t(()=>[ht,Vt,e(_t)]),_:1})]),_:1}))}});export{xa as default};
