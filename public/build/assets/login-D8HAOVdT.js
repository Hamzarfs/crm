import{r as g,e as F}from"./validators-Z6BjoYpS.js";import{d as R,r as u,j as B,k as D,o as j,c as P,b as a,f as o,e as r,n as e,G as f,v as _,p as m,aL as S,ai as M,F as N,a as E,O as w,aK as $}from"./main-FCzYu4Z5.js";import{t as G}from"./tree1-BjdzTW--.js";import{a as O,b as U,c as z,d as K}from"./auth-v2-login-illustration-light-DbdMjcCE.js";import{a as W,b as A}from"./mask-v2-light-BzqOCMOs.js";import{V as H}from"./VNodeRenderer-Ckj7pKWN.js";import{u as v}from"./useGenerateImageVariant-BY72P0Ev.js";import{$ as J}from"./api-CRIIns0m.js";import{a as p,V as k}from"./VRow-DcbkzY-u.js";import{V as y}from"./VImg-CJF-w0vk.js";import{V as Q,b}from"./VCard-Do568HRS.js";import{V as X}from"./VForm-DAROEqCA.js";import{V as x}from"./VTextField-JeOZvJkP.js";import"./helpers-BO_WrFPz.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-CP8SEjMm.js";import"./InputIcon-wsmb1BjU.js";import"./forwardRefs-C-GTDzx5.js";/* empty css                   */import"./VCounter-fwUCpOxO.js";import"./VField-Dk2Ak1ql.js";import"./easing-CjukEv2V.js";import"./VInput-B2EWUdv0.js";const Y={class:"auth-logo d-flex align-center gap-x-3"},Z={class:"auth-title"},ee={class:"d-flex align-center justify-end w-100 h-100 pa-10 pe-0"},ae=["src"],te={class:"text-h4 mb-1"},oe={class:"text-capitalize"},se=r("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),re={class:"d-flex align-center flex-wrap justify-space-between my-5 gap-2"},Re=R({__name:"login",setup(le){const L=v(K,z,U,O,!0),C=v(A,W),n=u(!1),h=B(),T=D(),c=u({email:void 0,password:void 0}),V=u(),l=u({email:"",password:""}),I=async()=>{try{const t=await J("/auth/login",{method:"POST",body:{email:l.value.email,password:l.value.password},onResponseError({response:i}){c.value=i._data.errors}}),{accessToken:s,userData:d}=t;w("userData").value=d,w("accessToken").value=s,await $(()=>{T.replace(h.query.to?String(h.query.to):{name:"dashboard"})})}catch(t){console.log(t)}},q=()=>{var t;(t=V.value)==null||t.validate().then(({valid:s})=>{s&&I()})};return(t,s)=>{const d=E("RouterLink");return j(),P(N,null,[a(d,{to:"/"},{default:o(()=>[r("div",Y,[a(e(H),{nodes:e(f).app.logo},null,8,["nodes"]),r("h1",Z,_(e(f).app.title),1)])]),_:1}),a(k,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[a(p,{md:"8",class:"d-none d-md-flex position-relative"},{default:o(()=>[r("div",ee,[a(y,{"max-width":"797",src:e(L),class:"auth-illustration"},null,8,["src"])]),r("img",{class:"auth-footer-mask",height:"360",src:e(C)},null,8,ae),a(y,{src:e(G),alt:"tree image",height:"190",width:"90",class:"auth-footer-tree"},null,8,["src"])]),_:1}),a(p,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[a(Q,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:o(()=>[a(b,null,{default:o(()=>[r("h4",te,[m(" Welcome to "),r("span",oe,_(e(f).app.title)+"!",1),m("  ")]),se]),_:1}),a(b,null,{default:o(()=>[a(e(X),{ref_key:"refVForm",ref:V,onSubmit:S(q,["prevent"])},{default:o(()=>[a(k,null,{default:o(()=>[a(p,{cols:"12"},{default:o(()=>[a(x,{modelValue:e(l).email,"onUpdate:modelValue":s[0]||(s[0]=i=>e(l).email=i),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in t?t.requiredValidator:e(g),"emailValidator"in t?t.emailValidator:e(F)],"error-messages":e(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(p,{cols:"12"},{default:o(()=>[a(x,{modelValue:e(l).password,"onUpdate:modelValue":s[1]||(s[1]=i=>e(l).password=i),label:"Password",placeholder:"路路路路路路路路路路路路",rules:["requiredValidator"in t?t.requiredValidator:e(g)],type:e(n)?"text":"password","error-messages":e(c).password,"append-inner-icon":e(n)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":s[2]||(s[2]=i=>n.value=!e(n))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),r("div",re,[a(d,{class:"text-primary",to:{name:"forgot-password"}},{default:o(()=>[m(" Forgot Password? ")]),_:1})]),a(M,{block:"",type:"submit"},{default:o(()=>[m(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Re as default};
