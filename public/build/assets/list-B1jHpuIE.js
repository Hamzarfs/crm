import{_ as le}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-DcuUperp.js";import{r as C,e as J,n as Q}from"./validators-Z6BjoYpS.js";import{d as Z,r as u,w as oe,o as M,g as W,f as a,b as e,n as o,aG as n,aL as X,ai as $,p as q,aK as H,aM as te,c as se,a0 as G,v as ue,e as ie,a as ne}from"./main-FCzYu4Z5.js";import{_ as Y}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-BVcUhHbr.js";import{V as j}from"./VDivider-knA9H03k.js";import{V as P,b as L,c as de}from"./VCard-Do568HRS.js";import{V as h}from"./VForm-DAROEqCA.js";import{V as x,a as p}from"./VRow-DcbkzY-u.js";import{V as y}from"./VTextField-JeOZvJkP.js";import{V as ee}from"./VNavigationDrawer-Ae1xKXtE.js";import{$ as I}from"./api-CRIIns0m.js";import{V as me}from"./VSpacer-DgLf_p26.js";import{V as pe}from"./VDataTable-BGPZE7tW.js";import{V as K}from"./VTooltip-SL5-U2jd.js";import{V as fe}from"./VSnackbar-xVpasArO.js";import{V as Ve}from"./VDialog-BbF2kOnV.js";import"./helpers-BO_WrFPz.js";import"./VAvatar-CP8SEjMm.js";import"./VImg-CJF-w0vk.js";import"./InputIcon-wsmb1BjU.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              *//* empty css                   */import"./VCounter-fwUCpOxO.js";import"./VField-Dk2Ak1ql.js";import"./easing-CjukEv2V.js";import"./VInput-B2EWUdv0.js";import"./delay-ghhtiNk_.js";import"./scopeId-C8kA2Rpd.js";import"./ssrBoot-CaII-3XN.js";import"./index-9rIf2CJL.js";import"./VPagination-ABgY-7nO.js";import"./VSelect-B3zOJvEu.js";import"./VList-DBeUyEP9.js";import"./dialog-transition-CkzesdKy.js";import"./VMenu-B6LO-Wa5.js";import"./VOverlay-CJoYV0aa.js";import"./lazy-s9MkjEdz.js";import"./VCheckboxBtn-B0Ml4Fv6.js";import"./VSelectionControl-CjMQjtTf.js";import"./VChip-ChL126MO.js";import"./VSlideGroup-CrEC992E.js";import"./VTable-DTLm3gSp.js";import"./filter-D7wIZvCz.js";const ce=Z({__name:"EditCustomerDrawer",props:{isDrawerOpen:{type:Boolean},errors:{},customer:{}},emits:["update:isDrawerOpen","customerData"],setup(B,{expose:O,emit:S}){const s=B,w=S,U=u(!1),b=u(),D=u(s.customer.first_name),v=u(s.customer.last_name),g=u(s.customer.email),_=u(s.customer.contact),d=u(s.customer.area),f=u(s.customer.zip),V=u(s.customer.country);oe(()=>s.customer,r=>{D.value=r.first_name,v.value=r.last_name,g.value=r.email,_.value=r.contact,d.value=r.area,f.value=r.zip,V.value=r.country},{immediate:!0,deep:!0});const c=()=>{w("update:isDrawerOpen",!1),H(()=>{var r,l;(r=b.value)==null||r.reset(),(l=b.value)==null||l.resetValidation()})},k=()=>{var r;(r=b.value)==null||r.validate().then(({valid:l})=>{l&&w("customerData",{first_name:D.value,last_name:v.value,email:g.value,contact:_.value,area:d.value,zip:f.value,country:V.value})})};O({closeNavigationDrawer:c});const A=r=>{w("update:isDrawerOpen",r)};return(r,l)=>{const T=Y;return M(),W(ee,{temporary:"",width:400,location:"end","model-value":s.isDrawerOpen,"onUpdate:modelValue":A},{default:a(()=>[e(T,{title:"Edit Customer",onCancel:c}),e(j),e(P,{flat:""},{default:a(()=>[e(L,null,{default:a(()=>[e(h,{ref_key:"refForm",ref:b,modelValue:o(U),"onUpdate:modelValue":l[7]||(l[7]=t=>n(U)?U.value=t:null),onSubmit:X(k,["prevent"])},{default:a(()=>[e(x,null,{default:a(()=>[e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(D),"onUpdate:modelValue":l[0]||(l[0]=t=>n(D)?D.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"First Name","error-messages":s.errors.first_name,placeholder:"First name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(v),"onUpdate:modelValue":l[1]||(l[1]=t=>n(v)?v.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"Last Name","error-messages":s.errors.last_name,placeholder:"Last name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(g),"onUpdate:modelValue":l[2]||(l[2]=t=>n(g)?g.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C),"emailValidator"in r?r.emailValidator:o(J)],label:"Email Address","error-messages":s.errors.email,placeholder:"Email address"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(_),"onUpdate:modelValue":l[3]||(l[3]=t=>n(_)?_.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C),"numberValidator"in r?r.numberValidator:o(Q)],label:"Contact number","error-messages":s.errors.contact,placeholder:"Customer name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(d),"onUpdate:modelValue":l[4]||(l[4]=t=>n(d)?d.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"Area","error-messages":s.errors.area,placeholder:"Area"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(f),"onUpdate:modelValue":l[5]||(l[5]=t=>n(f)?f.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"ZIP code","error-messages":s.errors.zip,placeholder:"ZIP code"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(V),"onUpdate:modelValue":l[6]||(l[6]=t=>n(V)?V.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"Country","error-messages":s.errors.country,placeholder:"Country"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e($,{type:"submit",class:"me-4"},{default:a(()=>[q(" Submit ")]),_:1}),e($,{type:"reset",variant:"outlined",color:"error",onClick:c},{default:a(()=>[q(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),ve=Z({__name:"AddNewCustomerDrawer",props:{isDrawerOpen:{type:Boolean},errors:{}},emits:["update:isDrawerOpen","customerData"],setup(B,{expose:O,emit:S}){const s=B,w=S,U=u(!1),b=u(),D=u(""),v=u(""),g=u(""),_=u(""),d=u(""),f=u(""),V=u(""),c=()=>{w("update:isDrawerOpen",!1),H(()=>{var r,l;(r=b.value)==null||r.reset(),(l=b.value)==null||l.resetValidation()})},k=()=>{var r;(r=b.value)==null||r.validate().then(({valid:l})=>{l&&w("customerData",{first_name:D.value,last_name:v.value,email:g.value,contact:_.value,area:d.value,zip:f.value,country:V.value})})};O({closeNavigationDrawer:c});const A=r=>{w("update:isDrawerOpen",r)};return(r,l)=>{const T=Y;return M(),W(ee,{temporary:"",width:400,location:"end","model-value":s.isDrawerOpen,"onUpdate:modelValue":A},{default:a(()=>[e(T,{title:"Add Customer",onCancel:c}),e(j),e(P,{flat:""},{default:a(()=>[e(L,null,{default:a(()=>[e(h,{ref_key:"refForm",ref:b,modelValue:o(U),"onUpdate:modelValue":l[7]||(l[7]=t=>n(U)?U.value=t:null),onSubmit:X(k,["prevent"])},{default:a(()=>[e(x,null,{default:a(()=>[e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(D),"onUpdate:modelValue":l[0]||(l[0]=t=>n(D)?D.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"First Name","error-messages":s.errors.first_name,placeholder:"First name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(v),"onUpdate:modelValue":l[1]||(l[1]=t=>n(v)?v.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"Last Name","error-messages":s.errors.last_name,placeholder:"Last name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(g),"onUpdate:modelValue":l[2]||(l[2]=t=>n(g)?g.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C),"emailValidator"in r?r.emailValidator:o(J)],label:"Email Address","error-messages":s.errors.email,placeholder:"Email address"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(_),"onUpdate:modelValue":l[3]||(l[3]=t=>n(_)?_.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C),"numberValidator"in r?r.numberValidator:o(Q)],label:"Contact number","error-messages":s.errors.contact,placeholder:"Customer name"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(d),"onUpdate:modelValue":l[4]||(l[4]=t=>n(d)?d.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"Area","error-messages":s.errors.area,placeholder:"Area"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(f),"onUpdate:modelValue":l[5]||(l[5]=t=>n(f)?f.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"ZIP code","error-messages":s.errors.zip,placeholder:"ZIP code"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e(y,{modelValue:o(V),"onUpdate:modelValue":l[6]||(l[6]=t=>n(V)?V.value=t:null),rules:["requiredValidator"in r?r.requiredValidator:o(C)],label:"Country","error-messages":s.errors.country,placeholder:"Country"},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:a(()=>[e($,{type:"submit",class:"me-4"},{default:a(()=>[q(" Submit ")]),_:1}),e($,{type:"reset",variant:"outlined",color:"error",onClick:c},{default:a(()=>[q(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),Ce=ie("span",null,"Customers",-1),ir=Z({__name:"list",async setup(B){let O,S;const s=u({});let w,U;const b=u(),D=u(),v=u(),g=[{title:"ID",key:"id"},{title:"Name",key:"full_name"},{title:"Email",key:"email"},{title:"Contact",key:"contact"},{title:"Area",key:"area"},{title:"ZIP",key:"zip"},{title:"Country",key:"country"},{title:"Actions",key:"actions",sortable:!1}],{customers:_}=([O,S]=te(()=>I("customers")),O=await O,S(),O),d=u(_),f=u(!1),V=u(!1),c=u(!1),k=u(!1);let A;const r=async N=>{const{success:i,message:E,customer:z}=await I("/customers",{method:"POST",body:N,onResponseError({response:F}){R.value=F._data.errors}});i&&(c.value=!0,d.value=[...d.value,z],A=E,b.value.closeNavigationDrawer(),H(()=>{v.value.$el.querySelector(".v-table__wrapper").scrollTop=v.value.$el.querySelector(".v-table__wrapper").scrollHeight}))},l=async N=>{const{success:i,message:E,customer:z}=await I(`customers/${s.value.id}`,{method:"PUT",body:N,onResponseError({response:F}){R.value=F._data.errors}});i&&(c.value=!0,d.value[U]=z,A=E,D.value.closeNavigationDrawer())},T=N=>{s.value=N,U=d.value.indexOf(N),V.value=!0},t=async()=>{const{success:N,message:i}=await I(`customers/${w}`,{method:"DELETE"});k.value=!1,N&&(c.value=!0,A=i,d.value=d.value.filter(E=>E.id!==w))},R=u({first_name:void 0,last_name:void 0,email:void 0,contact:void 0,zip:void 0,area:void 0,country:void 0});return(N,i)=>{const E=ne("IconBtn"),z=ve,F=ce,re=le;return M(),se("section",null,[e(P,{class:"mb-6"},{default:a(()=>[e(de,{class:"d-flex align-center my-2"},{default:a(()=>[Ce,e(me),e($,{onClick:i[0]||(i[0]=m=>f.value=!0),"prepend-icon":"ri-user-add-fill"},{default:a(()=>[q(" Add New Customer ")]),_:1})]),_:1}),e(j),e(pe,{hover:"","fixed-header":"",style:{"max-height":"600px"},items:o(d),"item-value":"id",ref_key:"dataTableRef",ref:v,headers:g,class:"text-no-wrap rounded-0",density:"default"},{"item.actions":a(({item:m})=>[e(E,{size:"small",onClick:ae=>T(m),color:"primary"},{default:a(()=>[e(G,{icon:"ri-edit-box-line"}),e(K,{activator:"parent",location:"top"},{default:a(()=>[q(" Edit ")]),_:1})]),_:2},1032,["onClick"]),e(E,{size:"small",onClick:ae=>{k.value=!0,n(w)?w.value=m.id:w=m.id},color:"error"},{default:a(()=>[e(G,{icon:"ri-delete-bin-7-line"}),e(K,{activator:"parent",location:"top"},{default:a(()=>[q(" Delete ")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1}),e(z,{isDrawerOpen:o(f),"onUpdate:isDrawerOpen":i[1]||(i[1]=m=>n(f)?f.value=m:null),onCustomerData:r,ref_key:"addNewCustomerDrawerRef",ref:b,errors:o(R)},null,8,["isDrawerOpen","errors"]),e(F,{isDrawerOpen:o(V),"onUpdate:isDrawerOpen":i[2]||(i[2]=m=>n(V)?V.value=m:null),onCustomerData:l,customer:o(s),ref_key:"editCustomerDrawerRef",ref:D,errors:o(R)},null,8,["isDrawerOpen","customer","errors"]),e(fe,{modelValue:o(c),"onUpdate:modelValue":i[4]||(i[4]=m=>n(c)?c.value=m:null)},{actions:a(()=>[e($,{color:"error",onClick:i[3]||(i[3]=m=>c.value=!1)},{default:a(()=>[q(" Close ")]),_:1})]),default:a(()=>[q(ue(o(A))+" ",1)]),_:1},8,["modelValue"]),e(Ve,{modelValue:o(k),"onUpdate:modelValue":i[8]||(i[8]=m=>n(k)?k.value=m:null),width:"400"},{default:a(()=>[e(P,{title:"Confirmation",class:"pb-5"},{default:a(()=>[e(re,{variant:"text",size:"default",onClick:i[5]||(i[5]=m=>k.value=!1)}),e(L,null,{default:a(()=>[q(" Are you sure you want to delete this customer? ")]),_:1}),e(L,{class:"d-flex align-center justify-center gap-4"},{default:a(()=>[e($,{variant:"elevated",onClick:i[6]||(i[6]=m=>t()),color:"error"},{default:a(()=>[q(" Confirm ")]),_:1}),e($,{color:"secondary",variant:"outlined",onClick:i[7]||(i[7]=m=>k.value=!1)},{default:a(()=>[q(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{ir as default};
